
<div  class="card"  [ngClass]="{'bluring': blure}">
  <div  >

      <div style="padding-top: 20px;padding-left: 20px;padding-right: 20px;  height: 100%    ">
        <section class="task-panel tasks-widget">
          <div class="panel-heading" style="padding-bottom: 40px">
            <div class="pull-left ">
              <h1>Team</h1>
            </div>
            <div class="pull-right row" *ngIf="user.role=='admin'">
              <div class="col" style="padding-top: 3px">
                <button type="button" class="btn btn-outline-dark" data-toggle="modal" data-target="#modal-add-contact" > <i class="bi bi-person-plus"></i> Add Contact </button>
              </div>
            </div>
          </div>
        </section>

  <div class="card-body px-3 px-md-5">
    <div class="row">
      <div class="col-lg-6 col-xl-4" *ngFor="let u of users">
        <div class="card card-default p-4">
          <div    class="media text-secondary" data-toggle="modal" data-target="#modal-contact"  (click)="selected=u">
            <img *ngIf="u.gender=='male'" src="assets/img/avatar.jfif" class="mr-3 img-fluid rounded" style="height: 35%; width: 35%" alt="Avatar Image">
            <img *ngIf="u.gender=='female'" src="assets/img/female.jpg" class="mr-3 img-fluid rounded" style="height: 35%; width: 35%" alt="Avatar Image">

            <div class="media-body" style="padding-top: 25px" >
              <h1 class="mt-0 mb-2 " style="color: #ec8404">{{u.firstname|titlecase}} {{u.name|titlecase}}</h1>
              <ul class="list-unstyled text-smoke  " style="color: black;font-size: 15px;padding-top: 5px">
                <li class="d-flex" >
                  <i class="bi bi-briefcase"></i>
                  &nbsp; {{u.job|titlecase}}
                </li>

              </ul>
            </div>
          </div>
        </div>
      </div>

      </div>
  </div>   </div>
  </div>


  <!-- Contact Modal -->
  <div class="modal fade" id="modal-contact" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
      <div class="modal-content">

        <div class="modal-header  " style="height: 50px;padding-top: 30px ">
          <div class="pull-left"> <h1> Profile Detail </h1></div>

          <div class="dropdown" style="padding-bottom: 15px ">
            <button class="btn btn-outline-dark"  style="border: none;" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="bi bi-list"></i>
            </button>

            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item"  data-dismiss="modal" aria-label="Close"  (click)="openPopup2()" >Edit Profile</a>
              <a class="dropdown-item" (click)="delete(selected.id)" >Delete Profile</a>
            </div>

          <button type="button" class="btn btn-outline-danger" data-dismiss="modal" aria-label="Close" style="border: none;" >
            <i class="bi bi-x"></i>
          </button></div>
        </div>



        <div class="modal-body pt-0">
          <div class="row no-gutters">
            <div class="col-md-6">
              <div class="profile-content-left px-4">
                <div class=" text-center px-0 border-0" style="padding-top: 15%">

                  <img *ngIf="selected.gender=='male'" src="assets/img/avatar.jfif" class="mr-3 img-fluid rounded" style="height: 80%; width: 80%" alt="Avatar Image">
                  <img *ngIf="selected.gender=='female'" src="assets/img/female.jpg" class="mr-3 img-fluid rounded" style="height: 80%; width: 80%" alt="Avatar Image">



                </div>

              </div>
            </div>

            <div class="col-md-6">
              <div class="contact-info px-4">
                <h2 class="mb-1">{{selected.firstname|titlecase}} {{selected.name|titlecase}}</h2>
                <p class="text-dark font-weight-medium pt-4 mb-2">Job</p>
                <p>{{selected.job|titlecase}}</p>
                <p class="text-dark font-weight-medium pt-4 mb-2">Email</p>
                <p>{{selected.email|titlecase}}</p>
                <p class="text-dark font-weight-medium pt-4 mb-2">Phone Number</p>
                <p>{{selected.phone}}</p>
                <p class="text-dark font-weight-medium pt-4 mb-2">Birthday</p>
                <p>{{selected.birthday| date: 'dd/MM/yyyy'}}</p>
                <p class="text-dark font-weight-medium pt-4 mb-2" *ngIf="selected.tasks">  Tasks </p>
                  <ul > <li *ngFor="let t of selected.tasks"> {{t.task|titlecase}} </li> </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Contact Button  -->
  <div class="modal fade" id="modal-add-contact" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
      <div class="modal-content">
        <form #form>
          <div class="modal-body px-4">


            <div class="row mb-2">
              <div class="col-lg-6">
                <div class="form-group">
                  <label >Firstname</label>
                  <input type="text" class="form-control" #firstname  >
                </div>
              </div>

              <div class="col-lg-6">
                <div class="form-group">
                  <label >Lastname</label>
                  <input type="text" class="form-control"   #name  >
                </div>
              </div>

              <div class="col-lg-6">
                <div class="form-group mb-4">
                  <label >Username</label>
                  <input type="text" class="form-control"   #username  >
                </div>
              </div>
              <div class="col-lg-6">
                <div class="form-group mb-4">
                  <label >Password</label>
                  <input type="text" class="form-control"   #password >
                </div>
              </div>
              <div class="col-lg-6">
                <div class="form-group mb-4">
                  <label >Email</label>
                  <input type="email" class="form-control"   #email >
                </div>
              </div>

              <div class="col-lg-6">
                <div class="form-group mb-4">
                  <label  >Birthday</label>
                  <input type="date" class="form-control"   #birthday >
                </div>
              </div>

              <div class="col-lg-6">
                <div class="form-group mb-4">
                  <label  >Job</label>
                  <input type="text" class="form-control"  #job  >
                </div>
              </div>
              <div class="col-lg-6">
                <div class="form-group mb-4">
                  <label >Gender</label>

                  <select class="form-select"  #Gender >
                    <option value=""></option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                  </select>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="form-group mb-4">
                  <label >Phone</label>
                  <input type="number" class="form-control"  #phone >
                </div>
              </div>
              <div class="col-lg-6">
                <div class="form-group mb-4">
                  <label >Role</label>

                  <select class="form-select"   #role>
                    <option value=""></option>
                    <option value="dev">Developer</option>
                    <option value="manager">Project Manager</option>
                    <option value="admin">Admin</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer px-4">
            <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-dark" (click)="save(username.value, name.value, firstname.value, job.value, email.value, password.value, birthday.value, role.value, phone.value, Gender.value)">Save Contact</button>
          </div>
        </form>
      </div>
    </div>
  </div></div>

<div
  class="pop"
  tabindex="-1"
  role="dialog"

  style="padding-bottom: 50px"
  [ngStyle]="{'display':displayStyle}">
  <div class="modal-dialog" role="document"
       style=" box-shadow: 0  15px 20px 0  rgba(0, 0, 0, 0.5); border-radius: 1rem">
    <div class="modal-content">

      <div class="modal-body">
        <div class="row">
          <div class="col">
             <h1> Edit Profil </h1></div>
        </div>

          <form >
            <div class="modal-body px-4">


              <div class="row mb-2">
                <div class="col-lg-6">
                  <div class="form-group">
                    <label >Firstname</label>
                    <input type="text" class="form-control" #firstname1 [value]="selected.name"  >
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group">
                    <label >Lastname</label>
                    <input type="text" class="form-control"   #name1 [value]="selected.name"  >
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group mb-4">
                    <label >Username</label>
                    <input type="text" class="form-control"   #username1 [value]="selected.username" >
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="form-group mb-4">
                    <label >Password</label>
                    <input type="text" class="form-control"   #password1   >
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="form-group mb-4">
                    <label >Email</label>
                    <input type="email" class="form-control"   #email1  [value]="selected.email">
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group mb-4">
                    <label  >Birthday</label>
                    <input type="date" class="form-control"   #birthday1  [value]="selected.birthday" >
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group mb-4">
                    <label  >Job</label>
                    <input type="text" class="form-control"  #job1   [value]="selected.job">
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="form-group mb-4">
                    <label >Gender</label>

                    <select class="form-select"  #Gender1  [value]="selected.gender" >
                      <option value="male">Male</option>
                      <option value="female">Female</option>
                    </select>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="form-group mb-4">
                    <label >Phone</label>
                    <input type="number" class="form-control"  #phone1  [value]="selected.phone">
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="form-group mb-4">
                    <label >Role</label>

                    <select class="form-select"   #role1  [value]="selected.role">
                      <option value=""></option>
                      <option value="admin">Admin</option>
                      <option value="manager">Manager</option>
                      <option value="dev">Developer</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </form>


          <div class="row" style="padding-top: 20px;">
            <div class="col" style="  display: flex; justify-content: center; align-items: center;">
              <button class="btn btn-outline-dark" (click)="save2(username1.value, name1.value, firstname1.value, job1.value, email1.value, password1.value, birthday1.value, role1.value, phone1.value, Gender1.value)"><i
                class="fa fa-check"
                aria-hidden="true"></i> Save
              </button>
            </div>
            <div class="col" style="  display: flex;  justify-content: center;align-items: center;">
              <button type="button" class="btn btn-outline-danger"
                      (click)="closePopup2()">
                <i class="fa fa-times" aria-hidden="true"></i> Cancel
              </button>
            </div>

<!--        </form>-->

      </div>
    </div>
  </div>
</div>
</div>
